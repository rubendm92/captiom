<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-form/iron-form.html"/>
<link rel="import" href="../../bower_components/paper-input/paper-input.html"/>
<link rel="import" href="../../bower_components/paper-button/paper-button.html"/>
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html"/>
<link rel="import" href="gender-selector.html"/>
<link rel="import" href="date-input.html"/>

<dom-module id="date-input">
  <template>
    <style include="shared-styles"></style>
    <style>
      :host {
        display: block;
      }
    </style>

    <paper-input id="input" label="[[label]]" value="{{stringDate}}" maxlength="10" auto-validate pattern="(^(((0[1-9]|1[0-9]|2[0-8])[\/](0[1-9]|1[012]))|((29|30|31)[\/](0[13578]|1[02]))|((29|30)[\/](0[4,6,9]|11)))[\/](19|[2-9][0-9])\d\d$)|(^29[\/]02[\/](19|[2-9][0-9])(00|04|08|12|16|20|24|28|32|36|40|44|48|52|56|60|64|68|72|76|80|84|88|92|96)$)" required$="[[required]]"></paper-input>
  </template>
  <script>

  (() => {
    'use strict';

    Polymer({
      is: 'date-input',

      properties: {
        label: String,
        stringDate: String,
        value: {
          type: Date,
          computed: '_computeDate(stringDate)'
        }
      },

      _computeDate: function (string) {
        let components = string.split('/');
        if (components.length !== 3) {
          return;
        }
        return new Date(components[2], components[1] - 1, components[0]);
      }
    });
  })();
  </script>
</dom-module>
